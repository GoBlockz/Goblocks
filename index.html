<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOblocks | Infinite Grid OS</title>
    <style>
        /* 
           GOblocks CORE ARCHITECTURE v6.0 
           EXTENDED COMPLEXITY LAYER
        */
        :root {
            --bg-base: #000000;
            --bg-surface: #080808;
            --bg-elevated: #111111;
            --bg-card: #161616;
            --nav-h: 65px;
            --side-w: 280px;
            --border-std: #222222;
            --border-bold: #444444;
            --text-primary: #ffffff;
            --text-secondary: #888888;
            --text-accent: #00ff88;
            --danger: #ff4444;
            --skin-tone: #ffdbac;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; outline: none; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--bg-base); color: var(--text-primary);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            overflow: hidden;
        }

        /* --- VAST AUTHENTICATION ENGINE --- */
        #auth-gate {
            position: fixed; inset: 0; background: var(--bg-base);
            z-index: 99999; display: flex; align-items: center; justify-content: center;
        }
        .auth-surface {
            background: var(--bg-surface); border: 1px solid var(--border-std);
            padding: 80px; width: 500px; border-radius: 2px; text-align: center;
            box-shadow: 0 0 100px rgba(255,255,255,0.05);
        }
        .auth-logo { font-size: 56px; font-weight: 900; margin-bottom: 10px; letter-spacing: -3px; }
        .auth-subtitle { color: var(--text-secondary); margin-bottom: 50px; font-size: 13px; text-transform: uppercase; letter-spacing: 2px; }
        
        .form-field { margin-bottom: 25px; text-align: left; }
        .form-label { display: block; font-size: 10px; font-weight: 900; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 10px; }
        .input-box {
            width: 100%; background: #000; border: 1px solid var(--border-std);
            padding: 18px; color: #fff; font-size: 16px; transition: var(--transition);
        }
        .input-box:focus { border-color: var(--text-primary); background: #050505; }
        .btn-gate {
            width: 100%; padding: 20px; background: var(--text-primary); color: #000;
            border: none; font-weight: 900; font-size: 14px; cursor: pointer; 
            text-transform: uppercase; letter-spacing: 2px; margin-top: 20px;
        }

        /* --- PRIMARY INTERFACE NAVIGATION --- */
        header.top-shell {
            height: var(--nav-h); background: #000; border-bottom: 1px solid var(--border-std);
            display: flex; align-items: center; padding: 0 40px; position: sticky; top: 0; z-index: 10000;
        }
        .shell-logo { font-size: 24px; font-weight: 900; cursor: pointer; letter-spacing: -1.5px; margin-right: 50px; }
        .shell-search { flex: 1; max-width: 600px; position: relative; }
        .search-inner { 
            width: 100%; background: #0a0a0a; border: 1px solid var(--border-std);
            padding: 12px 25px; border-radius: 5px; color: #fff; font-size: 14px;
        }
        .shell-stats { margin-left: auto; display: flex; align-items: center; gap: 40px; }
        .currency-cluster { color: var(--text-accent); font-weight: 900; font-size: 14px; display: flex; align-items: center; gap: 10px; }
        .user-pill { display: flex; align-items: center; gap: 15px; cursor: pointer; font-weight: 700; font-size: 14px; }
        .user-avatar-mini { width: 32px; height: 32px; background: #222; border-radius: 50%; border: 1px solid var(--border-std); }

        /* --- APPLICATION BODY --- */
        #app-viewport { display: none; height: calc(100vh - var(--nav-h)); }
        .app-visible { display: flex; }

        aside.rail {
            width: var(--side-w); border-right: 1px solid var(--border-std);
            padding: 40px 20px; display: flex; flex-direction: column; gap: 8px;
            background: var(--bg-surface);
        }
        .rail-link {
            padding: 15px 20px; border-radius: 5px; font-weight: 800; font-size: 13px;
            color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; gap: 15px;
            text-transform: uppercase; letter-spacing: 1px; transition: var(--transition);
        }
        .rail-link:hover, .rail-link.active { background: var(--bg-elevated); color: #fff; }
        .rail-link i { font-style: normal; font-size: 18px; opacity: 0.5; }

        main.scroller { flex: 1; padding: 60px; overflow-y: scroll; background: var(--bg-base); }
        .route-node { display: none; max-width: 1200px; margin: 0 auto; }
        .node-visible { display: block; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- COMPLEX UI PANELS --- */
        .panel { background: var(--bg-card); border: 1px solid var(--border-std); padding: 40px; border-radius: 5px; margin-bottom: 40px; }
        .panel h1 { font-size: 42px; font-weight: 900; margin: 0 0 20px 0; letter-spacing: -2px; }
        .grid-master { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .info-card { background: #000; border: 1px solid var(--border-std); padding: 25px; }
        .info-card h3 { margin: 0 0 10px 0; font-size: 14px; text-transform: uppercase; color: var(--text-secondary); }
        .info-card p { font-size: 24px; font-weight: 900; margin: 0; }

        /* --- AVATAR PHYSICS RIG (FULL ARMS/LEGS) --- */
        .editor-container { display: grid; grid-template-columns: 1fr 400px; gap: 60px; align-items: start; }
        .preview-chamber {
            aspect-ratio: 1/1; background: radial-gradient(circle, #151515 0%, #000 100%);
            border: 1px solid var(--border-std); display: flex; align-items: center; justify-content: center;
            perspective: 1000px; overflow: hidden;
        }
        .rig-main { position: relative; width: 100px; height: 180px; transform-style: preserve-3d; transition: transform 1s ease; }
        .limb { position: absolute; background: var(--skin-tone); border: 1px solid rgba(0,0,0,0.3); transition: background 0.3s; }
        
        .head-obj { width: 50px; height: 50px; top: -60px; left: 25px; border-radius: 5px; z-index: 10; }
        .torso-obj { width: 100px; height: 130px; top: 0; left: 0; border-radius: 2px; }
        .arm-obj-l { width: 40px; height: 130px; top: 0; left: -45px; }
        .arm-obj-r { width: 40px; height: 130px; top: 0; right: -45px; }
        .leg-obj-l { width: 45px; height: 130px; top: 135px; left: 0; }
        .leg-obj-r { width: 45px; height: 130px; top: 135px; right: 5px; }

        /* --- MARKET ENGINE --- */
        .store-shelf { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .product { background: var(--bg-card); border: 1px solid var(--border-std); padding: 20px; text-align: center; transition: var(--transition); }
        .product:hover { border-color: var(--text-primary); transform: translateY(-5px); }
        .prod-icon { height: 150px; background: #000; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; font-size: 50px; }
        .buy-btn { width: 100%; padding: 12px; background: #fff; color: #000; border: none; font-weight: 900; cursor: pointer; margin-top: 15px; }

        /* --- MEMBER DISCOVERY --- */
        .social-sidebar { width: 320px; background: var(--bg-surface); border-left: 1px solid var(--border-std); padding: 50px 30px; }
        .member-strip { display: flex; align-items: center; gap: 15px; padding: 15px; border-bottom: 1px solid #111; }
        .m-avatar-circ { width: 40px; height: 40px; background: #222; border-radius: 50%; }
        .m-name { font-weight: 900; font-size: 14px; }
        .m-status { color: var(--text-accent); font-size: 11px; text-transform: uppercase; }

    </style>
</head>
<body>

<div id="auth-gate">
    <div class="auth-surface">
        <div class="auth-logo">GOblocks</div>
        <div class="auth-subtitle">Core Identity Protocol</div>
        <div class="form-field">
            <label class="form-label">Create Identity Handle</label>
            <input type="text" id="username-field" class="input-box" placeholder="USERNAME_STRING">
        </div>
        <button class="btn-gate" onclick="Core.Actions.auth()">Initialize Session</button>
    </div>
</div>

<header class="top-shell">
    <div class="shell-logo" onclick="Core.Router.go('home')">GOblocks</div>
    <div class="shell-search"><input type="text" class="search-inner" placeholder="Scan the grid for users or assets..."></div>
    <div class="shell-stats">
        <div class="currency-cluster">G$ <span id="gbux-val">0</span></div>
        <div class="user-pill" onclick="Core.Router.go('avatar')">
            <span id="user-string">---</span>
            <div class="user-avatar-mini"></div>
        </div>
    </div>
</header>

<div id="app-viewport">
    <aside class="rail">
        <div class="rail-link active" id="rl-home" onclick="Core.Router.go('home')"><i>üè†</i> Dashboard</div>
        <div class="rail-link" id="rl-avatar" onclick="Core.Router.go('avatar')"><i>üë§</i> Avatar Lab</div>
        <div class="rail-link" id="rl-discover" onclick="Core.Router.go('discover')"><i>üåç</i> Discovery</div>
        <div class="rail-link" id="rl-market" onclick="Core.Router.go('market')"><i>üõí</i> Marketplace</div>
        <div style="margin-top: auto;">
            <div class="rail-link" style="color: var(--danger);" onclick="Core.Actions.logout()"><i>üö™</i> Exit Grid</div>
        </div>
    </aside>

    <main class="scroller">
        <!-- HOME ROUTE -->
        <section id="node-home" class="route-node node-visible">
            <div class="panel">
                <h1>Dashboard</h1>
                <p style="color: var(--text-secondary);">Welcome back, <span id="span-user">Entity</span>. Your local node is synchronized with the global grid.</p>
            </div>
            <div class="grid-master">
                <div class="info-card"><h3>Global Status</h3><p>Operational</p></div>
                <div class="info-card"><h3>Wallet Balance</h3><p id="card-gbux">0</p></div>
                <div class="info-card"><h3>Owned Assets</h3><p id="card-inv">0 Items</p></div>
            </div>
        </section>

        <!-- AVATAR ROUTE -->
        <section id="node-avatar" class="route-node">
            <h1>Avatar Lab</h1>
            <div class="editor-container">
                <div class="preview-chamber">
                    <div class="rig-main">
                        <div class="limb head-obj"></div>
                        <div class="limb arm-obj-l"></div>
                        <div class="limb torso-obj"></div>
                        <div class="limb arm-obj-r"></div>
                        <div class="limb leg-obj-l"></div>
                        <div class="limb leg-obj-r"></div>
                    </div>
                </div>
                <div class="panel">
                    <h3>Skin Tone Sequencer</h3>
                    <div id="tone-grid" style="display:grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                        <!-- JS GENERATED -->
                    </div>
                    <hr style="border: 0; border-top: 1px solid #222; margin: 40px 0;">
                    <h3>Equipped Gear</h3>
                    <div id="inventory-list" style="color: #444; font-size: 14px;">No gear detected.</div>
                </div>
            </div>
        </section>

        <!-- MARKET ROUTE -->
        <section id="node-market" class="route-node">
            <h1>Marketplace</h1>
            <div class="store-shelf" id="product-grid">
                <!-- JS GENERATED -->
            </div>
        </section>

        <!-- DISCOVER ROUTE -->
        <section id="node-discover" class="route-node">
            <h1>Discovery</h1>
            <div class="store-shelf" id="discovery-grid">
                <!-- JS GENERATED -->
            </div>
        </section>
    </main>

    <aside class="social-sidebar">
        <h4 style="color: var(--text-secondary); font-size: 10px; letter-spacing: 3px; margin-bottom: 30px;">ACTIVE ENTITIES</h4>
        <div id="global-member-feed"></div>
    </aside>
</div>

<script>
/* 
   GOblocks INFINITY ENGINE v6.0
   COMPLEX STATE MANAGEMENT SCRIPT
*/
const Core = {
    Store: {
        session: JSON.parse(localStorage.getItem('goblox_v6')) || null,
        catalog: [
            { id: 101, n: "Titanium Shades", p: 150, i: "üï∂Ô∏è" },
            { id: 102, n: "Cyber Crown", p: 500, i: "üëë" },
            { id: 103, n: "Vortex Cape", p: 1200, i: "üß•" },
            { id: 104, n: "Grid Boots", p: 250, i: "üë¢" }
        ]
    },

    Actions: {
        auth() {
            const input = document.getElementById('username-field').value.trim();
            if (input.length < 2) return alert("System rejected handle: Too short.");
            Core.Store.session = {
                handle: input,
                skin: '#ffdbac',
                balance: 1000,
                inv: [],
                joined: new Date().toLocaleDateString()
            };
            Core.System.save();
            location.reload();
        },
        logout() {
            localStorage.removeItem('goblox_v6');
            location.reload();
        },
        purchase(id) {
            const item = Core.Store.catalog.find(x => x.id === id);
            if (Core.Store.session.balance >= item.p) {
                Core.Store.session.balance -= item.p;
                Core.Store.session.inv.push(item.n);
                Core.System.save();
                Core.System.refresh();
                alert(`Asset ${item.n} synchronized to identity.`);
            } else {
                alert("Insufficient Grid Credits.");
            }
        }
    },

    Router: {
        go(target) {
            document.querySelectorAll('.route-node').forEach(n => n.classList.remove('node-visible'));
            document.querySelectorAll('.rail-link').forEach(l => l.classList.remove('active'));
            document.getElementById('node-' + target).classList.add('node-visible');
            document.getElementById('rl-' + target).classList.add('active');
        }
    },

    System: {
        save() {
            localStorage.setItem('goblox_v6', JSON.stringify(Core.Store.session));
        },
        refresh() {
            if (!Core.Store.session) return;
            const s = Core.Store.session;
            document.getElementById('auth-gate').style.display = 'none';
            document.getElementById('app-viewport').classList.add('app-visible');
            document.getElementById('user-string').innerText = s.handle.toUpperCase();
            document.getElementById('span-user').innerText = s.handle;
            document.getElementById('gbux-val').innerText = s.balance;
            document.getElementById('card-gbux').innerText = s.balance;
            document.getElementById('card-inv').innerText = s.inv.length + " Items";
            document.documentElement.style.setProperty('--skin-tone', s.skin);

            // Populate Skins
            const tones = ['#ffdbac', '#f1c27d', '#e0ac69', '#8d5524', '#ffffff', '#222', '#00ff88', '#ff3333'];
            document.getElementById('tone-grid').innerHTML = tones.map(t => 
                `<div onclick="Core.System.updateSkin('${t}')" style="background:${t}; height:50px; cursor:pointer; border:1px solid #222;"></div>`
            ).join('');

            // Populate Marketplace
            document.getElementById('product-grid').innerHTML = Core.Store.catalog.map(p => `
                <div class="product">
                    <div class="prod-icon">${p.i}</div>
                    <b>${p.n}</b><br><small>${p.p} G-BUX</small>
                    <button class="buy-btn" onclick="Core.Actions.purchase(${p.id})">PURCHASE</button>
                </div>
            `).join('');

            // Populate Discovery & Feed
            const list = [s.handle];
            document.getElementById('global-member-feed').innerHTML = list.map(m => `
                <div class="member-strip"><div class="m-avatar-circ"></div><div><div class="m-name">${m}</div><div class="m-status">ONLINE</div></div></div>
            `).join('');
            document.getElementById('discovery-grid').innerHTML = list.map(m => `
                <div class="product"><div class="prod-icon">üë§</div><b>${m}</b><br><small>ENTITY_ONLINE</small></div>
            `).join('');
        },
        updateSkin(color) {
            Core.Store.session.skin = color;
            Core.System.save();
            document.documentElement.style.setProperty('--skin-tone', color);
        }
    }
};

Core.System.refresh();
</script>
</body>
</html>
